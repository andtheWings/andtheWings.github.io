[{"path":"index.html","id":"sids-related-mortality-in-cook-county-il","chapter":"1 SIDS-Related Mortality in Cook County, IL","heading":"1 SIDS-Related Mortality in Cook County, IL","text":"","code":""},{"path":"index.html","id":"abstract","chapter":"1 SIDS-Related Mortality in Cook County, IL","heading":"1.1 Abstract","text":"Although overall rates Sudden Infant Death Syndrome declining, dramatic racial disparities persist many metropolitan regions, including Cook County, IL. analysis, sought identify specific micro-regions county disparities severe public health practitioners can target future interventions high precision. also sought predictively model SIDS incidence expected highest based census-level socio-ecologic factors. hypothesized microregions highest SIDS incidence follow patterns historic racial segregation. Similarly, hypothesized factors reflecting high levels socioeconomic disadvantage predictive high SIDS incidence. However, interested identifying clusters city model perform well hopes studying areas poor predictive performance might identify new factors associated particularly harmful protective effects.Image credit JAMA Pediatrics","code":""},{"path":"import-the-data.html","id":"import-the-data","chapter":"2 Import the Data","heading":"2 Import the Data","text":"","code":""},{"path":"import-the-data.html","id":"dependencies","chapter":"2 Import the Data","heading":"2.1 Dependencies","text":"","code":"\n# Load needed modules\nbox::use(\n    dplyr[full_join, glimpse, select],\n    janitor[clean_names],\n    magrittr[`%>%`],\n    readxl[read_xlsx],\n    sf[st_set_geometry],\n    sids_data_wrangling = ./modules/sids_data_wrangling,\n    tibble[as_tibble]\n)"},{"path":"import-the-data.html","id":"initial-import","chapter":"2 Import the Data","heading":"2.2 Initial import","text":"First, read excel file originally shared project:","code":"\nraw <- \n    # Parse excel file\n    read_xlsx(\"data/finaldataforanalysis3_220121.xlsx\") %>%\n    # Clean up variability in naming conventions\n    clean_names()"},{"path":"import-the-data.html","id":"join-census-tract-populations","chapter":"2 Import the Data","heading":"2.3 Join census tract populations","text":", import census population data:","code":"\n## This is a custom function I wrote that \n## pulls data from the TidyCensus API about\n## the population count of people under five \n## years old and about spatial features \n## for each census tract. I have commented it \n## out and saved the result in an RDS file\n## so as to not make a new call to the API \n## every time this script is run. You can\n## inspect the function definition in the \n## modules folder of the source code.\n\n# coords_and_pop_est <- \n#     sids_data_wrangling$get_coords_and_pop_est(raw)\n# \n# saveRDS(coords_and_pop_est, \"data/coords_and_pop_est.RDS\")\n\ncoords_and_pop_est <- readRDS(\"data/coords_and_pop_est.RDS\")\n\n# Join the population counts to the imported dataframe\ndf <- \n    coords_and_pop_est %>%\n    # Drop geospatial features\n    st_set_geometry(NULL) %>%\n    # Convert to tibble format\n    as_tibble() %>%\n    # And join to raw\n    full_join(raw)\n#> Joining, by = \"fips\"\n\n# Preview the data\nglimpse(df)\n#> Rows: 1,315\n#> Columns: 32\n#> $ fips                                 <dbl> 17031807500, …\n#> $ pop_under_five                       <dbl> 151, 192, 21,…\n#> $ count_asphyxia                       <dbl> 0, 0, 1, 0, 0…\n#> $ count_opioid_death                   <dbl> 1, 7, 2, 2, 6…\n#> $ svi_socioeconomic                    <dbl> 0.1269, 0.593…\n#> $ svi_household_composition_disability <dbl> 0.1728, 0.803…\n#> $ svi_minority_language                <dbl> 0.7024, 0.677…\n#> $ svi_housing_transportation           <dbl> 0.3690, 0.528…\n#> $ svi_summary_ranking                  <dbl> 0.2470, 0.679…\n#> $ pe_foreignborn                       <dbl> 31.6, 2.0, 1.…\n#> $ pe_marriedmales                      <dbl> 62.5, 23.0, 3…\n#> $ pe_marriedfemales                    <dbl> 56.6, 23.0, 2…\n#> $ pedivorcewidowedmale                 <dbl> 6.4, 16.9, 7.…\n#> $ pedivorcewidowedfemale               <dbl> 16.8, 34.7, 3…\n#> $ pelessthanhighschool                 <dbl> 7.1, 9.2, 8.0…\n#> $ highschooldiploma                    <dbl> 14.6, 28.4, 2…\n#> $ somecollege                          <dbl> 12.8, 26.4, 3…\n#> $ collegediploma                       <dbl> 65.5, 36.0, 3…\n#> $ black                                <dbl> 2.5, 97.4, 96…\n#> $ white                                <dbl> 58.3, 0.7, 1.…\n#> $ hispanic                             <dbl> 5.6, 0.0, 2.2…\n#> $ male                                 <dbl> 48.8, 50.8, 3…\n#> $ percent_enployed                     <dbl> 61.6, 49.0, 4…\n#> $ incomelt10                           <dbl> 0.0, 15.7, 10…\n#> $ incomelt25                           <dbl> 3.6, 15.6, 22…\n#> $ incomelt50                           <dbl> 10.9, 15.9, 2…\n#> $ incomelt75                           <dbl> 15.7, 27.6, 1…\n#> $ incomegt75                           <dbl> 69.8, 25.3, 2…\n#> $ privateinsurance                     <dbl> 78.9, 55.5, 5…\n#> $ publicinsurance                      <dbl> 26.4, 43.5, 5…\n#> $ noinsurance                          <dbl> 2.8, 12.2, 13…\n#> $ spanish_language                     <dbl> 6.0, 2.1, 0.7…"},{"path":"import-the-data.html","id":"save-for-use-in-other-chapters","chapter":"2 Import the Data","heading":"2.4 Save for use in other chapters","text":"","code":"\nsaveRDS(df, file = \"data/df.RDS\")"},{"path":"mapping-sids-deaths.html","id":"mapping-sids-deaths","chapter":"3 Mapping SIDS Deaths","heading":"3 Mapping SIDS Deaths","text":"Visit http://danielriggins.com/widgets/cook_county_sids_deaths.html full-screen view.","code":""},{"path":"mapping-sids-deaths.html","id":"code-to-produce-the-map","chapter":"3 Mapping SIDS Deaths","heading":"3.1 Code to produce the map","text":"","code":""},{"path":"mapping-sids-deaths.html","id":"load-dependencies","chapter":"3 Mapping SIDS Deaths","heading":"3.1.1 Load Dependencies","text":"","code":"\nbox::use(\n    dplyr[\n        case_when,\n        full_join,\n        mutate,\n        select\n    ],\n    leaflet[\n        addLayersControl,\n        addLegend,\n        addPolygons,\n        addProviderTiles, \n        leaflet, \n        setMaxBounds, \n        setView\n    ],\n    leaflet.extras[addFullscreenControl],\n    magrittr[`%>%`],\n    sf[...],\n    tibble[view]\n)"},{"path":"mapping-sids-deaths.html","id":"reshape-data-for-use-in-the-map","chapter":"3 Mapping SIDS Deaths","heading":"3.1.2 Reshape data for use in the map","text":"","code":"\n# Load SIDS death data\ndf <-\n    # Load cached geospatial features\n    readRDS(\"data/coords_and_pop_est.RDS\") %>%\n    # Join to cached dataframe\n    full_join(readRDS(\"data/df.RDS\")) %>%\n    # Select ID and outcome variables\n    select(fips, count_asphyxia) %>%\n    # Turn outcome into an ordinal factor\n    mutate(\n        death_count = factor(\n            case_when(\n                count_asphyxia == 0 ~ \"No Deaths\",\n                count_asphyxia == 1 ~ \"One Death\",\n                count_asphyxia == 2 ~ \"Two Deaths\",\n                count_asphyxia == 3 ~ \"Three Deaths\",\n                count_asphyxia == 4 ~ \"Four Deaths\",\n                count_asphyxia == 5 ~ \"Five Deaths\",\n                count_asphyxia == 6 ~ \"Six Deaths\"\n            ),\n            ordered = TRUE,\n            levels = c(\n                \"No Deaths\", \n                \"One Death\", \n                \"Two Deaths\", \n                \"Three Deaths\", \n                \"Four Deaths\", \n                \"Five Deaths\", \n                \"Six Deaths\"\n            )\n        )\n    )\n\n# Configure color palette\nsids_palette <- \n    leaflet::colorFactor(\n        palette = \"magma\",\n        reverse = TRUE,\n        levels = c(\n                \"No Deaths\", \n                \"One Death\", \n                \"Two Deaths\", \n                \"Three Deaths\", \n                \"Four Deaths\", \n                \"Five Deaths\", \n                \"Six Deaths\"\n            )\n    )"},{"path":"mapping-sids-deaths.html","id":"create-the-map","chapter":"3 Mapping SIDS Deaths","heading":"3.1.3 Create the Map","text":"","code":"\n# Assign map to a widget object\nm <- leaflet(df) %>%\n    # Use CartoDB's background tiles\n    addProviderTiles(\"CartoDB.Positron\") %>%\n    # Center and zoom the map to Cook County\n    setView(lat = 41.816544, lng = -87.749500, zoom = 9) %>%\n    # Add button to enable fullscreen map\n    addFullscreenControl() %>%\n    # Add census tract polygons colored to reflect the number of deaths\n    addPolygons(\n        # No borders to the polygons, just fill\n        stroke = FALSE,\n        # Color according to palette above\n        color = ~ sids_palette(death_count),\n        # Group polygons by number of deaths for use in the layer control\n        group = ~ death_count,\n        # Make slightly transparent\n        fillOpacity = 0.7,\n        # Click on the polygon to get its ID\n        popup = ~ paste0(\"<b>FIPS ID:<\/b> \", as.character(fips))\n    ) %>%\n    #Add legend\n    addLegend(\n        title = \"Count of SIDS deaths <br> per census tract <br> from 2015-2019\",\n        values = ~ death_count,\n        pal = sids_palette,\n        position = \"topright\"\n    ) %>%\n    # Add ability to toggle each factor grouping on or off the map\n    addLayersControl(overlayGroups = c(\n                \"No Deaths\", \n                \"One Death\", \n                \"Two Deaths\", \n                \"Three Deaths\", \n                \"Four Deaths\", \n                \"Five Deaths\", \n                \"Six Deaths\"\n            ),\n            position = \"topleft\"\n        )"},{"path":"describing-sids-deaths.html","id":"describing-sids-deaths","chapter":"4 Describing SIDS Deaths","heading":"4 Describing SIDS Deaths","text":"primary outcome analysis :count_asphyxia = count SIDS-related deaths census tractThis count-type outcome, typically modeled using Poisson Negative Binomial distributions. using Negative Binomial, since Poisson limited variance needing equal mean.visualize count_asphyxia distribution count frequencies.expected, majority census tracts SIDS-related deaths.’s little hard see tail distribution let’s tabulate:","code":"\nDataExplorer::plot_histogram(df$count_asphyxia)\njanitor::tabyl(df$count_asphyxia)[,1:2]\n#>  df$count_asphyxia    n\n#>                  0 1078\n#>                  1  176\n#>                  2   44\n#>                  3   11\n#>                  4    3\n#>                  5    2\n#>                  6    1"}]
